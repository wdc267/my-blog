import{Q as e,o as a,ab as t,r as s,Y as l,c as o,a as r,T as n,R as i,a7 as d,ak as u,al as c,u as m,E as p,s as f,V as g,M as h,K as b,L as w,am as k,O as _,S as y,f as v,e as j,an as x}from"../js/@vue/@vue.f7028b0c.js";import{u as C,c as V,a as D}from"../js/vue-router/vue-router.c984c968.js";import{E as P,a as U,b as M,c as $,d as E,e as O,f as R,g as S,h as A,i as I,j as L,k as q,l as T,m as F,n as N,o as J,p as H,q as B,r as z,s as K,t as Y,u as Q,v as W}from"../js/element-plus/element-plus.7321c66c.js";import{a as G}from"../js/axios/axios.791a546b.js";import{u as X,c as Z}from"../js/vuex/vuex.4f77c17f.js";import{E as ee}from"../js/@element-plus/@element-plus.a9af614f.js";import{a as ae}from"../js/js-cookie/js-cookie.d59fc71c.js";import{M as te}from"../js/mockjs/mockjs.d10acb50.js";import"../js/@vueuse/@vueuse.7b9ae5d9.js";import"../js/lodash-es/lodash-es.89ebfda0.js";import"../js/async-validator/async-validator.ff95bfc9.js";import"../js/@popperjs/@popperjs.b696b006.js";import"../js/@ctrl/@ctrl.a951068a.js";import"../js/form-data/form-data.31bc4777.js";import"../js/dayjs/dayjs.5f26be78.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const se={__name:"App",setup:s=>(s,l)=>{const o=t("router-view");return a(),e(o)}},le=(e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t},oe={setup(){const e=s(null),a=l({username:"admin",password:"admin"}),t=l({username:[{required:!0,message:"Please input your user name"}],password:[{required:!0,message:"Please input password"}]});return{loginDataRef:e,loginData:a,rules:t,login:()=>{e.value.validate((e=>{e&&G.get("https://db-api.amarea.cn/users").then((e=>{alert(e),a.username=e.data[0].id}))}))}}}},re=e=>(u("data-v-5f274666"),e=e(),c(),e),ne={class:"login-body"},ie={class:"login-panel"},de=re((()=>r("div",{class:"login-title"},"登录账号",-1))),ue=re((()=>r("span",{class:"iconfont icon-Account"},null,-1))),ce=re((()=>r("span",{class:"iconfont icon-password"},null,-1))),me=re((()=>r("a",{class:"to-register"},"注册账号",-1)));const pe=le(oe,[["render",function(e,s,l,u,c,m){const p=P,f=U,g=M,h=$,b=E,w=t("router-link");return a(),o("div",ne,[r("div",ie,[de,n(b,{model:u.loginData,rules:u.rules,ref:"loginDataRef"},{default:i((()=>[n(f,{prop:"username"},{default:i((()=>[n(p,{placeholder:"Please input your user name",modelValue:u.loginData.username,"onUpdate:modelValue":s[0]||(s[0]=e=>u.loginData.username=e)},{prefix:i((()=>[ue])),_:1},8,["modelValue"])])),_:1}),n(f,{prop:"password"},{default:i((()=>[n(p,{type:"password",placeholder:"Please input password",modelValue:u.loginData.password,"onUpdate:modelValue":s[1]||(s[1]=e=>u.loginData.password=e),"show-password":""},{prefix:i((()=>[ce])),_:1},8,["modelValue"])])),_:1}),n(f,null,{default:i((()=>[n(g,{modelValue:u.loginData.rememberMe,"onUpdate:modelValue":s[2]||(s[2]=e=>u.loginData.rememberMe=e),style:{color:"white"}},{default:i((()=>[d("记住我")])),_:1},8,["modelValue"])])),_:1}),n(f,null,{default:i((()=>[n(h,{type:"primary",style:{width:"100%"},onClick:u.login},{default:i((()=>[d("登录")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),n(w,{to:"/register"},{default:i((()=>[me])),_:1})])])}],["__scopeId","data-v-5f274666"]]),fe={class:"register-body"},ge={class:"register-panel"},he=r("div",{class:"register-title"},"注册账号",-1),be=r("a",{class:"to-register"},"去登录账号",-1),we={__name:"Register",setup(e){const u=s(null),c=l({username:"",email:"",nickname:"",sex:"",telephone:"",address:"",password:"",confirmPassword:""}),p=l({username:[{required:!0,message:"Please input username"}],password:[{validator:(e,a,t)=>{if(""===a)t(new Error("Please input the password"));else{if(""!==c.confirmPassword){if(!u.value)return;u.value.validateField("confirmPassword",(()=>null))}t()}},trigger:"blur"}],email:[{required:!0,message:"Please input your email"}],confirmPassword:[{validator:(e,a,t)=>{""===a?t(new Error("Please input the password again")):a!==c.password?t(new Error("Two inputs don't match!")):t()},trigger:"blur"}]}),f=()=>{u.value.validate((e=>{}))};return(e,s)=>{const l=P,g=U,h=O,b=R,w=E,k=$,_=t("router-link");return a(),o("div",fe,[r("div",ge,[he,n(w,{"label-position":"right","label-width":"80px",model:m(c),rules:m(p),ref_key:"registerDataRef",ref:u},{default:i((()=>[n(g,{prop:"username",label:"用户名",required:""},{default:i((()=>[n(l,{placeholder:"Please input your user name",modelValue:m(c).username,"onUpdate:modelValue":s[0]||(s[0]=e=>m(c).username=e)},null,8,["modelValue"])])),_:1}),n(g,{prop:"email",label:"电子邮件",required:""},{default:i((()=>[n(l,{placeholder:"Please input your email",modelValue:m(c).email,"onUpdate:modelValue":s[1]||(s[1]=e=>m(c).email=e)},null,8,["modelValue"])])),_:1}),n(g,{prop:"nickname",label:"昵称"},{default:i((()=>[n(l,{placeholder:"Please input your nick name",modelValue:m(c).nickname,"onUpdate:modelValue":s[2]||(s[2]=e=>m(c).nickname=e)},null,8,["modelValue"])])),_:1}),n(g,{label:"性别",prop:"sex"},{default:i((()=>[n(b,{modelValue:m(c).sex,"onUpdate:modelValue":s[3]||(s[3]=e=>m(c).sex=e)},{default:i((()=>[n(h,{label:"男"}),n(h,{label:"女"})])),_:1},8,["modelValue"])])),_:1}),n(g,{prop:"telephone",label:"手机号"},{default:i((()=>[n(l,{placeholder:"Please input your telephone number",modelValue:m(c).telephone,"onUpdate:modelValue":s[4]||(s[4]=e=>m(c).telephone=e)},null,8,["modelValue"])])),_:1}),n(g,{prop:"address",label:"地址"},{default:i((()=>[n(l,{placeholder:"Please input your address",modelValue:m(c).address,"onUpdate:modelValue":s[5]||(s[5]=e=>m(c).address=e)},null,8,["modelValue"])])),_:1}),n(g,{prop:"password",label:"密码",required:""},{default:i((()=>[n(l,{type:"password",placeholder:"Please input your password",modelValue:m(c).password,"onUpdate:modelValue":s[6]||(s[6]=e=>m(c).password=e)},null,8,["modelValue"])])),_:1}),n(g,{prop:"confirmPassword",label:"确认密码",required:""},{default:i((()=>[n(l,{type:"password",placeholder:"Please input your password again",modelValue:m(c).confirmPassword,"onUpdate:modelValue":s[7]||(s[7]=e=>m(c).confirmPassword=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),n(g,null,{default:i((()=>[n(k,{type:"primary",style:{width:"100%"},onClick:f},{default:i((()=>[d("注册")])),_:1})])),_:1}),n(_,{to:"/login"},{default:i((()=>[be])),_:1})])])}}},ke=p({setup(){let e=X();const a=f((()=>e.state.currentMenu)),t=C();return{getImgSrc:e=>new URL(Object.assign({"../assets/images/user.jpg":"/my-blog/assets/user-42224af0.jpg"})[`../assets/images/${e}.jpg`],self.location).href,handleCollapse:()=>{e.commit("updateIsCollapse")},current:a,handleLoginOut:()=>{e.commit("cleanMenu"),e.commit("clearToken"),t.push({name:"login"})}}}}),_e=e=>(u("data-v-2abe3053"),e=e(),c(),e),ye={class:"l-content"},ve={class:"r-content"},je={class:"to-login"},xe=_e((()=>r("a",null,"注册",-1))),Ce=_e((()=>r("a",null,"登录",-1))),Ve={class:"el-dropdown-link"},De=["src"];const Pe=le(ke,[["render",function(s,l,o,u,c,m){const p=t("Menu"),f=S,b=$,w=A,k=I,_=t("router-link"),y=L,v=q,j=T,x=F;return a(),e(x,null,{default:i((()=>[r("div",ye,[n(b,{size:"small",onClick:s.handleCollapse},{default:i((()=>[n(f,{size:20},{default:i((()=>[n(p)])),_:1})])),_:1},8,["onClick"]),n(k,{separator:"/",class:"bread"},{default:i((()=>[n(w,{to:{path:"/"}},{default:i((()=>[d("首页")])),_:1}),s.current?(a(),e(w,{key:0,to:s.current.path},{default:i((()=>[d(g(s.current.label),1)])),_:1},8,["to"])):h("",!0)])),_:1})]),r("div",ve,[r("div",je,[n(_,{to:"/register"},{default:i((()=>[xe])),_:1}),n(_,{to:"/login"},{default:i((()=>[Ce])),_:1})]),n(j,null,{dropdown:i((()=>[n(v,null,{default:i((()=>[n(y,null,{default:i((()=>[d("个人中心")])),_:1}),n(y,{onClick:s.handleLoginOut},{default:i((()=>[d("退出")])),_:1},8,["onClick"])])),_:1})])),default:i((()=>[r("span",Ve,[r("img",{class:"user",src:s.getImgSrc("user"),alt:""},null,8,De)])])),_:1})])])),_:1})}],["__scopeId","data-v-2abe3053"]]);const Ue=le({setup(){const e=X(),a=C(),t=e.state.menu;return{noChildren:()=>t.filter((e=>!e.children)),hasChildren:()=>t.filter((e=>e.children)),clickMenu:t=>{a.push({name:t.name}),e.commit("selectMenu",t)}}}},[["render",function(t,s,l,d,u,c){const m=N,p=J,f=H,h=B,v=z;return a(),e(v,{width:t.$store.state.isCollapse?"200px":"64px"},{default:i((()=>[n(h,{"default-active":"2",class:"el-menu-vertical-demo","background-color":"#545c64","text-color":"#fff",collapse:!t.$store.state.isCollapse,"collapse-transition":!1},{default:i((()=>[b(r("h3",null,"个人博客",512),[[w,t.$store.state.isCollapse]]),b(r("h3",null,"博客",512),[[w,!t.$store.state.isCollapse]]),(a(!0),o(_,null,k(d.noChildren(),(t=>(a(),e(m,{index:t.path,key:t.path,onClick:e=>d.clickMenu(t)},{default:i((()=>[(a(),e(y(t.icon),{class:"icons"})),r("span",null,g(t.label),1)])),_:2},1032,["index","onClick"])))),128)),(a(!0),o(_,null,k(d.hasChildren(),(t=>(a(),e(f,{index:t.label,key:t.path},{title:i((()=>[(a(),e(y(t.icon),{class:"icons"})),r("span",null,g(t.label),1)])),default:i((()=>[n(p,null,{default:i((()=>[(a(!0),o(_,null,k(t.children,((t,s)=>(a(),e(m,{index:t.path,key:s,onClick:e=>d.clickMenu(t)},{default:i((()=>[(a(),e(y(t.icon),{class:"icons"})),r("span",null,g(t.label),1)])),_:2},1032,["index","onClick"])))),128))])),_:2},1024)])),_:2},1032,["index"])))),128))])),_:1},8,["collapse"])])),_:1},8,["width"])}],["__scopeId","data-v-f312b1e0"]]),Me=p({components:{CommonHeader:Pe,CommonAside:Ue}}),$e={class:"common-layout"};const Ee=le(Me,[["render",function(e,s,l,r,d,u){const c=Ue,m=Pe,p=t("router-view"),f=K,g=Y;return a(),o("div",$e,[n(g,{class:"lay-container"},{default:i((()=>[n(c),n(g,{class:"r-container"},{default:i((()=>[n(m),n(f,{class:"right-main"},{default:i((()=>[n(p)])),_:1})])),_:1})])),_:1})])}],["__scopeId","data-v-4d44d0da"]]);p({setup(){const{proxy:e}=j();let a=s([]),t=s([]);return v((()=>{(async()=>{let t=await e.$api.getTableData();a.value=t})(),(async()=>{let a=await e.$api.getCountData();t.value=a})()})),{tableLabel:{name:"博客名称",createDate:"创建日期",updateDate:"更新日期",writer:"作者名"},tableData:a,countData:t}}});p({setup(){const{proxy:e}=j(),a=s([]),t=l([{prop:"name",label:"姓名"},{prop:"age",label:"年龄"},{prop:"sexLabel",label:"性别"},{prop:"birth",label:"出生",width:200},{prop:"addr",label:"地址",width:320}]);v((()=>{r(o)}));const o=l({total:0,page:1,name:""}),r=async t=>{let s=await e.$api.getUserData(t);t.total=s.count,a.value=s.list.map((e=>(e.sexLabel=0===e.sex?"女":"男",e)))},n=l({keyword:""}),i=s(!1),d=l({name:"",age:"",sex:"",birth:"",addr:""}),u=s("add");return{list:a,tableLabel:t,config:o,changePage:e=>{o.page=e,r(o)},formInline:n,handleSearch:()=>{o.name=n.keyword,r(o)},dialogVisible:i,handleClose:a=>{Q.confirm("确定关闭吗?").then((()=>{e.$refs.userForm.resetFields(),a()})).catch((()=>{}))},formUser:d,onSubmit:()=>{e.$refs.userForm.validate((async a=>{if(a)if("add"==u.value){d.birth=(e=>{let a=(e=new Date(e)).getFullYear(),t=e.getMonth()+1,s=e.getDate();function l(e){return e<10?"0"+e:e}return a+"-"+l(t)+"-"+l(s)})(d.birth),await e.$api.addUser(d)&&(i.value=!1,e.$refs.userForm.resetFields(),r(o))}else{"男"==d.sex?d.sex=1:d.sex=0,await e.$api.editUser(d)&&(i.value=!1,e.$refs.userForm.resetFields(),r(o))}else W({showClose:!0,message:"请输入正确的内容",type:"error"})}))},handelCancel:async()=>{i.value=!1,e.$refs.userForm.resetFields()},action:u,handleEdit:a=>{u.value="edit",i.value=!0,1==a.sex?a.sex="男":a.sex="女",e.$nextTick((()=>{Object.assign(d,a)}))},handelAdd:()=>{u.value="add",i.value=!0},handleDelete:a=>{Q.confirm("你确定删除吗?").then((async()=>{await e.$api.deleteUser({id:a.id}),W({showClose:!0,message:"删除成功",type:"success"}),r(o)})).catch((()=>{}))}}}});const Oe=V({routes:[{name:"login",path:"/login",component:pe},{name:"register",path:"/register",component:we},{path:"/",component:Ee,name:"home1",redirect:"/home",children:[]}],history:D("/my-blog/"),fallback:"index.html"}),Re={},Se=function(e,a,t){if(!a||0===a.length)return e();const s=document.getElementsByTagName("link");return Promise.all(a.map((e=>{if((e=function(e){return"/my-blog/"+e}(e))in Re)return;Re[e]=!0;const a=e.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!t)for(let t=s.length-1;t>=0;t--){const l=s[t];if(l.href===e&&(!a||"stylesheet"===l.rel))return}else if(document.querySelector(`link[href="${e}"]${l}`))return;const o=document.createElement("link");return o.rel=a?"stylesheet":"modulepreload",a||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),a?new Promise(((a,t)=>{o.addEventListener("load",a),o.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},Ae=Z({state:{isCollapse:!0,currentMenu:null,menu:[],token:""},mutations:{updateIsCollapse(e,a){e.isCollapse=!e.isCollapse},selectMenu(e,a){"home"==a.name?e.currentMenu=null:e.currentMenu=a},setMenu(e,a){e.menu=a,localStorage.setItem("menu",JSON.stringify(a))},addMenu(e,a){if(!localStorage.getItem("menu"))return;const t=JSON.parse(localStorage.getItem("menu"));e.menu=t;const s=[];t.forEach((e=>{if(e.children)e.children=e.children.map((e=>{let a=`../views/${e.url}.vue`;return e.component=()=>Se((()=>import(a)),[]),e})),s.push(...e.children);else{let a=`../views/${e.url}.vue`;e.component=()=>Se((()=>import(a)),[]),s.push(e)}})),s.forEach((e=>{a.addRoute("home1",e)}))},cleanMenu(e){e.menu=[],localStorage.removeItem("menu")},setToken(e,a){e.token=a,ae.set("token",a)},clearToken(e){e.token="",ae.remove("token")},getToken(e){e.token=e.token||ae.get("token")}}});function Ie(e){const a=e.split("?")[1];return a?JSON.parse('{"'+decodeURIComponent(a).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{}}let Le=[];for(let Qe=0;Qe<200;Qe++)Le.push(te.mock({id:te.Random.guid(),name:te.Random.cname(),addr:te.mock("@county(true)"),"age|18-60":1,birth:te.Random.date(),sex:te.Random.integer(0,1)}));const qe=e=>{const{name:a,page:t=1,limit:s=20}=Ie(e.url),l=Le.filter((e=>!a||-1!==e.name.indexOf(a)||-1!==e.addr.indexOf(a))),o=l.filter(((e,a)=>a<s*t&&a>=s*(t-1)));return{code:200,data:{count:l.length,list:o}}},Te=e=>{const{name:a,addr:t,age:s,birth:l,sex:o}=JSON.parse(e.body);return Le.unshift({id:te.Random.guid(),name:a,addr:t,age:s,birth:l,sex:o}),{code:200,data:{message:"添加成功"}}},Fe=e=>{const{id:a}=Ie(e.url);return a?(Le=Le.filter((e=>e.id!==a)),{code:200,message:"删除成功"}):{code:-999,message:"参数不正确"}},Ne=e=>{const{id:a,name:t,addr:s,age:l,birth:o,sex:r}=JSON.parse(e.body),n=parseInt(r);return Le.some((e=>{if(e.id===a)return e.name=t,e.addr=s,e.age=l,e.birth=o,e.sex=n,!0})),{code:200,data:{message:"编辑成功"}}},Je=e=>{const{username:a,password:t}=JSON.parse(e.body);return"admin"===a&&"admin"===t?{code:200,data:{menu:[{path:"/home",name:"home",label:"首页",icon:"House",url:"Home"},{path:"/user",name:"user",label:"个人中心",icon:"user",url:"User"},{path:"/blogs",name:"blogs",label:"我的博客",icon:"Collection",url:"Blogs"},{label:"其它",icon:"location",path:"/other",children:[{path:"/page1",name:"page1",label:"用户管理",icon:"setting",url:"/Page1"},{path:"/page2",name:"page2",label:"博客管理",icon:"setting",url:"/Page2"}]}],token:te.Random.guid(),message:"获取成功"}}:"xiaoxiao"===a&&"xiaoxiao"===t?{code:200,data:{menu:[{path:"/",name:"home",label:"首页",icon:"House",url:"Home"},{path:"/user",name:"user",label:"个人中心",icon:"user",url:"User"},{path:"/blogs",name:"blogs",label:"我的博客",icon:"Collection",url:"Blogs"}],token:te.Random.guid(),message:"获取成功"}}:{code:-999,data:{message:"密码错误"}}};te.mock("/user/getData",(()=>({code:200,data:{tableData:[{name:"blog1",createDate:"2023/1/1",updateDate:"2023/1/2",writer:"wdc"},{name:"blog2",createDate:"2023/1/1",updateDate:"2023/1/2",writer:"wdc"},{name:"blog3",createDate:"2023/1/1",updateDate:"2023/1/2",writer:"wdc"},{name:"blog4",createDate:"2023/1/1",updateDate:"2023/1/2",writer:"wdc"}]}}))),te.mock(/userAdmin\/getUser/,"get",qe),te.mock(/userAdmin\/add/,"post",Te),te.mock(/userAdmin\/edit/,"post",Ne),te.mock(/userAdmin\/delete/,"get",Fe),te.mock(/permission\/getMenu/,"post",Je);const He="production",Be={env:He,mock:!1,...{development:{baseApi:"/api",mockApi:"https://www.fastmock.site/mock/671926fb122a9f47cb3da06315f60136/api"},test:{baseApi:"//test.com/api",mockApi:"https://www.fastmock.site/mock/671926fb122a9f47cb3da06315f60136/api"},pro:{baseApi:"//future.com/api",mockApi:"https://www.fastmock.site/mock/671926fb122a9f47cb3da06315f60136/api"}}[He]},ze="网络请求异常，请稍后再试.....",Ke=G.create({baseURL:Be.baseApi});Ke.interceptors.request.use((e=>e)),Ke.interceptors.response.use((e=>{const{code:a,data:t,msg:s}=e.data;return 200==a?t:(W.error(s||ze),Promise.reject(s||ze))}));const Ye=x(se);for(const[Qe,We]of Object.entries(ee))Ye.component(Qe,We);Ae.commit("addMenu",Oe),Oe.beforeEach(((e,a,t)=>{Ae.commit("getToken");var s;Ae.state.token||"login"===e.name?(s=e.path,Oe.getRoutes().filter((e=>e.path==s)).length?t():t({name:"home"})):t({name:"login"})})),Ye.use(Oe).use(Ae),Ye.mount("#app");
